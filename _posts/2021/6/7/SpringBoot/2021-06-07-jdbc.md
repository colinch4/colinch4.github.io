---
layout: post
title: "[SpringBoot]  ë¶€íŠ¸ì™€ JDBC ì˜¤ë¼í´ ì—°ê²°í•˜ê¸° (Mac ver)"
description: " "
date: 2021-06-07
tags: [springboot]
comments: true
share: true
---


## ğŸ› ë¶€íŠ¸ì™€ JDBC ì˜¤ë¼í´ ì—°ê²°í•˜ê¸° (Mac ver)

[ëª©í‘œ]

- ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ jdbcë¥¼ ì—°ê²°í•˜ê¸°
- oracle dbë¥¼ h2ë¡œ í™•ì¸í•˜ê¸°

<br>

### JDBC Oracle

> - ì˜¤ë¼í´ JDBCëŠ” ì˜ˆì „ì— Spring Frameworkì—ì„œ ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ë¶€íŠ¸ë¡œ ì—°ê²°í•˜ë ¤ë‹ˆ ë˜ ë‹¤ë¥¸ ì„¤ì •ë°©ë²•ì´ í•„ìš”
> - oracle jdbc6ë¥¼ ì‚¬ìš©í•´ì„œ dbì—°ê²° í•´ì£¼ê³ , ì„±ê³µì ìœ¼ë¡œ dbì— ë°˜ì˜ì´ ë˜ëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ê¸°

<br>

### JDBC ì˜¤ë¼í´ ì˜ì¡´ì„± ì„¤ì¹˜

> - oracle jdbcê°€ maven repositoryì—ëŠ” ì˜ˆì „ ë²„ì „ìœ¼ë¡œë§Œ ìˆì–´ì„œ í•˜ë‚˜í•˜ë‚˜ ì„¤ì •ì„ í•´ì¤˜ì•¼ í•œë‹¤.
> - JDBC ì˜ì¡´ì„±ê³¼ Repository ì¶”ê°€
> - https://mvnrepository.com/artifact/com.oracle/ojdbc6/11.2.0

<br>

![](./imgs/jdbc/jdbc1.png)

[pom.xml]

**1. ì˜ì¡´ì„± ì¶”ê°€**

```xml
<!-- https://mvnrepository.com/artifact/com.oracle/ojdbc6 -->
<dependency>
	<groupId>com.oracle</groupId>
	<artifactId>ojdbc6</artifactId>
	<version>11.2.0</version>
</dependency>
```

**2. propertiesì™€ dependenciesì‚¬ì´ì— repository ì¶”ê°€**

- `<url>ICM repository ì£¼ì†Œ </url>`

```xml
<repositories>
	<repository>
	    <id>Oracle</id>
	    <url>http://maven.icm.edu.pl/artifactory/repo/</url>
	</repository>
</repositories>
```

<br>

### jdbc6.jar ì¶”ê°€

> - ìœ„ ì²˜ëŸ¼ ì˜ì¡´ì„± ì¶”ê°€ë¥¼ í–ˆëŠ”ë°ë„ Maven Dependencyì— jaríŒŒì¼ë¡œ ì¶”ê°€ê°€ ì•ˆë  ê²½ìš°ì—ëŠ” jdbc.jarë¥¼ ì¬ì„¤ì • í•´ì¤˜ì•¼í•œë‹¤.
> - jdbc6.jarë¥¼ ë°›ê±°ë‚˜ ì˜ˆì „ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ë˜ jdbc6.jarë¥¼ ê°€ì ¸ì™€ì„œ ê²½ë¡œ ì„¤ì •

<br>

**1. ojdbc6.jar íŒŒì¼ ê°€ì ¸ê°€ê¸°**

[/users/ì‚¬ìš©ì/.m2/repository/com/oracle/ojdbc6/11.2.0]

![](./imgs/jdbc/jdbc2.png)

**2. ojdbc6.jar íŒŒì¼ ì´ë¦„ ë³€ê²½ = ojdbc6-11.2.0**

<br>

**3. ì •ìƒì ìœ¼ë¡œ ì„œë²„ê°€ ëŒì•„ê°€ëŠ”ì§€ í™•ì¸**

![](./imgs/jdbc/jdbc3.png)

<br>

### properties (YAML)ì— jdbc ì„¤ì •í•˜ê¸°

> - applicaion.propertiesë¥¼ application.ymlë¡œ í™•ì¥ìë¥¼ ë°”ê¿”ì„œ í™˜ê²½ì„¤ì •í•´ì£¼ê¸°

```YAML
server:
  port: 9090

spring:
  h2:
    console:
      enabled: true

  datasource:
    driver-class-name: oracle.jdbc.driver.OracleDriver
    url: jdbc:oracle:thin:@localhost:1521:XE
    username: hr
    password: hr

  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
```

<br>

### h2-consoleë¡œ í™•ì¸í•˜ê¸°

> - hrê³„ì •ìœ¼ë¡œ ìš°ì„  ë¡œê·¸ì¸ í›„, jdbcê°€ ì˜ ì—°ê²°ì´ ë˜ì—ˆë‚˜ í™•ì¸
> - **ì£¼ì˜!** h2 dependencyê°€ ìš°ì„ ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨

<br>

1. [ì›¹ ë¸Œë¼ìš°ì €ë¡œ ì ‘ì†] localhost:9090/h2-console

![](./imgs/jdbc/jdbc4.png)

<br>

2. ë¡œê·¸ì¸ í›„, ì˜ ì—°ê²° ë˜ì—ˆë‚˜ í™•ì¸

![](./imgs/jdbc/jdbc5.png)

<br><br>

### Table ìƒì„±í•´ì„œ, ë°ì´í„° ë„£ì–´ë³´ê¸°

> - ë°ì´í„°ë¥¼ ë„£ê¸° ì „ì—, oracle sqlë¡œ ë¨¼ì € tableì„ ìƒì„±
> - ìƒì„±ëœ í…Œì´ë¸”ì— db ë„£ê¸°

<br>

**1. command ì°½ì— docker oracle ì‹¤í–‰**

> - Mac ì˜¤ë¼í´ ë„ì»¤ ì„¤ì¹˜í•˜ê¸° : https://stophyun.tistory.com/190

- ë„ì»¤ run

```bash
 docker run --name oracle11g -d -p 8080:8080 -p 1521:1521 jaspeen/oracle-xe-11g
```

- ë„ì»¤ exec

```bash
docker exec -it oracle11g sqlplus
```

<br>

**2. SQL ë¬¸ ì‹¤í–‰**

```sql
CREATE TABLE books (
 ISBN VARCHAR2(13) PRIMARY KEY,
 title VARCHAR2(100) NOT NULL,
 author VARCHAR2(100) ,
 publisher VARCHAR2(20) ,
 price NUMBER(10, 2) ,
 img_url VARCHAR2(100) ,
 introduce VARCHAR2(200)
);
```

<br>

**3. Test DB ë„£ì–´ë³´ê¸°**

[BookStoreJpaImpTest.java]

```java
@Test
public void testCreate() {
	bookStore.save(new BookJPAo(Book.sample()));
}
```

<br>

**4. h2ì—ì„œ í™•ì¸**

![](./imgs/jdbc/jdbc6.png)

<br>
<br>
