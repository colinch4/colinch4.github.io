---
layout: post
title: "State pattern in Python"
description: " "
date: 2023-10-04
tags: []
comments: true
share: true
---

The State pattern is a behavioral design pattern that allows an object to alter its behavior when its internal state changes. It ensures that the object's behavior is determined by its current state, without being explicitly dependent on multiple if-else statements or switch cases.

## When to Use the State Pattern?

The State pattern is useful in scenarios where an object needs to change its behavior based on its internal state. This could include situations such as:

- Controlling the behavior of a user interface based on different states (e.g., logged in, logged out, admin mode).
- Implementing a state machine where an object transitions between different states and performs actions accordingly.

## Implementation Example

Let's say we are building an audio player that supports three states: "Playing", "Paused", and "Stopped". We can use the State pattern to control the behavior of the player based on its current state.

```python
class AudioPlayer:
    def __init__(self):
        self.state = StoppedState()

    def change_state(self, state):
        self.state = state

    def play(self):
        self.state.play()

    def pause(self):
        self.state.pause()

    def stop(self):
        self.state.stop()

class AudioPlayerState:
    def play(self):
        pass

    def pause(self):
        pass

    def stop(self):
        pass

class PlayingState(AudioPlayerState):
    def play(self):
        print("Already playing audio.")

    def pause(self):
        print("Pause audio playback.")
        audio_player.change_state(PausedState())

    def stop(self):
        print("Stop audio playback.")
        audio_player.change_state(StoppedState())

class PausedState(AudioPlayerState):
    def play(self):
        print("Resume audio playback.")
        audio_player.change_state(PlayingState())

    def pause(self):
        print("Already paused audio.")

    def stop(self):
        print("Stop audio playback.")
        audio_player.change_state(StoppedState())

class StoppedState(AudioPlayerState):
    def play(self):
        print("Start audio playback.")
        audio_player.change_state(PlayingState())

    def pause(self):
        print("Audio is already stopped.")

    def stop(self):
        print("Already stopped audio.")

# Usage example
audio_player = AudioPlayer()
audio_player.play()  # Output: Start audio playback.
audio_player.pause()  # Output: Pause audio playback.
audio_player.play()  # Output: Resume audio playback.
audio_player.stop()  # Output: Stop audio playback.
```

In this example, the `AudioPlayer` class holds a reference to its current state, which is initially set to `StoppedState`. The `change_state` method allows us to switch between different states.

Each state class, like `PlayingState`, `PausedState`, and `StoppedState`, inherits from the `AudioPlayerState` base class and overrides the `play()`, `pause()`, and `stop()` methods based on their specific behavior.

By using the State pattern, the audio player's behavior changes dynamically based on its internal state.