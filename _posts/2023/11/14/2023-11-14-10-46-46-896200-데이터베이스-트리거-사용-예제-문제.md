---
layout: post
title: "ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë¦¬ê±° ì‚¬ìš© ì˜ˆì œ ë¬¸ì œ"
description: " "
date: 2023-11-14
tags: [SQL]
comments: true
share: true
---

ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë¦¬ê±°ëŠ” íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì €ì¥ í”„ë¡œì‹œì €ì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë¦¬ê±°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œ ë¬¸ì œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ì£¼ë¬¸ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” `orders` í…Œì´ë¸”ì´ ìˆìŠµë‹ˆë‹¤. ì´ í…Œì´ë¸”ì—ëŠ” ì£¼ë¬¸ ë²ˆí˜¸(`order_id`), ì£¼ë¬¸ ë‚ ì§œ(`order_date`), ì£¼ë¬¸ ìƒíƒœ(`order_status`) ë“±ì˜ ì—´ì´ ìˆìŠµë‹ˆë‹¤. ì£¼ë¬¸ ìƒíƒœê°€ `'ë°°ì†¡ì¤€ë¹„ì¤‘'`ìœ¼ë¡œ ë³€ê²½ë  ë•Œë§ˆë‹¤, í•´ë‹¹ ì£¼ë¬¸ì˜ ì •ë³´ë¥¼ `shipping` í…Œì´ë¸”ì— ìë™ìœ¼ë¡œ ë³µì‚¬í•˜ëŠ” íŠ¸ë¦¬ê±°ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.

### í…Œì´ë¸” êµ¬ì¡°

#### orders í…Œì´ë¸”

| ì—´ ì´ë¦„     | ë°ì´í„° ìœ í˜•   |
| ----------- | ------------- |
| order_id    | INT           |
| order_date  | DATE          |
| order_status| VARCHAR(20)   |

#### shipping í…Œì´ë¸”

| ì—´ ì´ë¦„     | ë°ì´í„° ìœ í˜•   |
| ----------- | ------------- |
| order_id    | INT           |
| order_date  | DATE          |
| order_status| VARCHAR(20)   |

### ì˜ˆì œ íŠ¸ë¦¬ê±°

```sql
-- íŠ¸ë¦¬ê±° ìƒì„±
CREATE TRIGGER copy_order_to_shipping
AFTER UPDATE ON orders
FOR EACH ROW
BEGIN
  IF NEW.order_status = 'ë°°ì†¡ì¤€ë¹„ì¤‘' THEN
    INSERT INTO shipping (order_id, order_date, order_status)
    VALUES (NEW.order_id, NEW.order_date, NEW.order_status);
  END IF;
END;
```

ìœ„ì˜ ì˜ˆì œì—ì„œëŠ” `orders` í…Œì´ë¸”ì´ ì—…ë°ì´íŠ¸ë  ë•Œë§ˆë‹¤ í•´ë‹¹ í…Œì´ë¸”ì˜ `order_status` ê°’ì´ `'ë°°ì†¡ì¤€ë¹„ì¤‘'`ìœ¼ë¡œ ë³€ê²½ë˜ë©´, `shipping` í…Œì´ë¸”ì— í•´ë‹¹ ì£¼ë¬¸ì˜ ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ë³µì‚¬í•˜ëŠ” íŠ¸ë¦¬ê±°ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

> ğŸ’¡ **íŒ**: ì´ ì˜ˆì œëŠ” MySQL ë¬¸ë²•ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë¬¸ë²•ì´ ì•½ê°„ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

ì´ë ‡ê²Œ íŠ¸ë¦¬ê±°ë¥¼ ìƒì„±í•˜ë©´ ì£¼ë¬¸ ìƒíƒœê°€ `'ë°°ì†¡ì¤€ë¹„ì¤‘'`ìœ¼ë¡œ ë³€ê²½ë  ë•Œë§ˆë‹¤ `shipping` í…Œì´ë¸”ì— í•´ë‹¹ ì£¼ë¬¸ì˜ ì •ë³´ê°€ ìë™ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.

ì´ì™€ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë¦¬ê±°ë¥¼ ì‚¬ìš©í•˜ë©´ ì¼ë ¨ì˜ ì‘ì—…ì„ ìë™í™”í•  ìˆ˜ ìˆìœ¼ë©°, ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ìƒí™©ì— ë§ê²Œ íŠ¸ë¦¬ê±°ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> [MySQL Trigger ë¬¸ì„œ](https://dev.mysql.com/doc/refman/8.0/en/triggers.html)

#ë°ì´í„°ë² ì´ìŠ¤ #íŠ¸ë¦¬ê±°