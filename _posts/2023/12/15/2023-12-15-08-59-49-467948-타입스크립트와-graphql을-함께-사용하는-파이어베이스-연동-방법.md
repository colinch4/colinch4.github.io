---
layout: post
title: "[typescript] íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ GraphQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” íŒŒì´ì–´ë² ì´ìŠ¤ ì—°ë™ ë°©ë²•"
description: " "
date: 2023-12-15
tags: [typescript]
comments: true
share: true
---

íŒŒì´ì–´ë² ì´ìŠ¤ëŠ” ë°±ì—”ë“œë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ í”Œë«í¼ìœ¼ë¡œ, ì‚¬ìš©ì ì¸ì¦, ë°ì´í„°ë² ì´ìŠ¤, ìŠ¤í† ë¦¬ì§€, í´ë¼ìš°ë“œ ê¸°ëŠ¥ ë“±ì„ ì œê³µí•©ë‹ˆë‹¤. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ GraphQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ íŒŒì´ì–´ë² ì´ìŠ¤ë¥¼ ì—°ë™í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## 1. Firebase ì„¤ì •

ë¨¼ì €, Firebase í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. Firebase ì½˜ì†”ì„ í†µí•´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³ , í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ ì›¹ ì•±ì„ ì¶”ê°€í•©ë‹ˆë‹¤. Firebase êµ¬ì„± ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” êµ¬ì„± íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  í”„ë¡œì íŠ¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.

## 2. GraphQL ìŠ¤í‚¤ë§ˆ ì •ì˜

GraphQL ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ `graphql` ëª¨ë“ˆì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install graphql
```

ê·¸ë¦¬ê³  ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```typescript
import { gql } from 'graphql';

const typeDefs = gql`
  type User {
    id: ID!
    name: String!
    email: String!
  }

  type Query {
    getUser(id: ID!): User
  }

  type Mutation {
    addUser(name: String!, email: String!): User
  }
`;

export default typeDefs;
```

## 3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

Firebase ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•´ `firebase-admin` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install firebase-admin
```

ê·¸ë¦¬ê³  ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.

```typescript
import * as admin from 'firebase-admin';

const serviceAccount = require('path/to/serviceAccountKey.json');

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  databaseURL: 'https://<DATABASE_NAME>.firebaseio.com',
});

const db = admin.firestore();

export default db;
```

## 4. GraphQL ë¦¬ì¡¸ë²„ ì‘ì„±

ì´ì œ GraphQL ì¿¼ë¦¬ ë° ë®¤í…Œì´ì…˜ì— ëŒ€í•œ ë¦¬ì¡¸ë²„ í•¨ìˆ˜ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```typescript
import db from './firebase';
import { UserInputError } from 'apollo-server';

const resolvers = {
  Query: {
    async getUser(_, { id }) {
      const userSnapshot = await db.collection('users').doc(id).get();
      const userData = userSnapshot.data();
      return { id: userSnapshot.id, ...userData };
    },
  },
  Mutation: {
    async addUser(_, { name, email }) {
      if (!name || !email) {
        throw new UserInputError('Name and email are required.');
      }
      const newUser = await db.collection('users').add({ name, email });
      const userSnapshot = await newUser.get();
      return { id: newUser.id, ...userSnapshot.data() };
    },
  },
};

export default resolvers;
```

## 5. GraphQL ì„œë²„ ì„¤ì •

ë§ˆì§€ë§‰ìœ¼ë¡œ, GraphQL ì„œë²„ë¥¼ ì„¤ì •í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.

```typescript
import { ApolloServer } from 'apollo-server';
import typeDefs from './graphql/schema';
import resolvers from './graphql/resolvers';

const server = new ApolloServer({ typeDefs, resolvers });

server.listen().then(({ url }) => {
  console.log(`ğŸš€ Server ready at ${url}`);
});
```

ì´ì œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ GraphQLì„ ì‚¬ìš©í•˜ì—¬ íŒŒì´ì–´ë² ì´ìŠ¤ë¥¼ ì—°ë™í•˜ëŠ” ê¸°ë³¸ì ì¸ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ë” ë§ì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë‚˜ê°€ë©´ì„œ ê°•ë ¥í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì°¸ê³ : [Firebase Admin SDK for Node.js](https://firebase.google.com/docs/admin/setup)

---
ìœ„ì˜ ì˜ˆì‹œì—ì„œëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ GraphQLì„ ì‚¬ìš©í•˜ì—¬ íŒŒì´ì–´ë² ì´ìŠ¤ì™€ ì—°ë™í•˜ëŠ” ê°„ë‹¨í•œ ë°©ë²•ì— ëŒ€í•´ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ëŒ€ë¡œ í™•ì¥í•˜ê³  ê°œì„ í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ì— ì ìš©í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.