---
layout: post
title: "[flutter] dio_retry íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ ê²°ê³¼ë¥¼ ìºì‹œí•˜ëŠ” ë°©ë²•"
description: " "
date: 2023-12-18
tags: [flutter]
comments: true
share: true
---

ì´ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì—ì„œëŠ” flutter ì•±ì—ì„œ dio_retry íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ ê²°ê³¼ë¥¼ ìºì‹œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. dio_retryëŠ” dio íŒ¨í‚¤ì§€ì˜ í™•ì¥íŒìœ¼ë¡œ, HTTP ìš”ì²­ì„ ë³´ë‹¤ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

## dio_retry íŒ¨í‚¤ì§€ ì„¤ì¹˜

ë¨¼ì €, dio_retry íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. `pubspec.yaml` íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```yaml
dependencies:
  dio: ^4.0.0
  dio_retry: ^4.0.0
```

ê·¸ëŸ° ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
flutter pub get
```

## API ìš”ì²­ ê²°ê³¼ ìºì‹œ

dio_retryë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ ê²°ê³¼ë¥¼ ìºì‹œí•˜ë ¤ë©´ `dio_retry` íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•˜ëŠ” `RetryOnHttpClientAdapter`ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ HTTP ìš”ì²­ ì‹¤íŒ¨ ì‹œ ì´ì „ ê²°ê³¼ë¥¼ ìºì‹±í•˜ê³ , ë‹¤ìŒ ìš”ì²­ì—ì„œ ìºì‹œëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒì€ dio_retryë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ ê²°ê³¼ë¥¼ ìºì‹œí•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œì…ë‹ˆë‹¤.

```dart
import 'package:dio/dio.dart';
import 'package:dio_retry/dio_retry.dart';

void main() {
  final dio = Dio()..interceptors.add(
    RetryOnHttpClientAdapter(
      dio: Dio(),
      options: const RetryOptions(
        retries: 3,
        retryEvaluator: (error) => error is DioError && error.type == DioErrorType.response,
      ),
    ),
  );
  
  // Cache the response
  var response = await dio.get('https://api.example.com/data');

  // Retrieve the cached response
  var cachedResponse = await dio.get('https://api.example.com/data');
}
```

ìœ„ì˜ ì˜ˆì œì—ì„œ, `RetryOnHttpClientAdapter`ë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ì„ ë³´ëƒˆê³ , ì²« ë²ˆì§¸ ìš”ì²­ì˜ ê²°ê³¼ë¥¼ ìºì‹±í•œ í›„ ë‹¤ìŒ ìš”ì²­ì—ì„œëŠ” ìºì‹œëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì´ì œ flutter ì•±ì—ì„œ dio_retryë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ ê²°ê³¼ë¥¼ ìºì‹œí•˜ëŠ” ë°©ë²•ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê³ , ì•±ì˜ ì‘ë‹µ ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë” ë§ì€ ì •ë³´ë¥¼ ì›í•˜ì‹œë©´ [dio_retry íŒ¨í‚¤ì§€ ë¬¸ì„œ](https://pub.dev/packages/dio_retry)ë¥¼ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Happy coding! ğŸš€