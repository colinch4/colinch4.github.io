---
layout: post
title: "[nodejs] Apollo Serverë¥¼ ì‚¬ìš©í•œ GraphQL ì„œë²„ êµ¬ì¶•"
description: " "
date: 2023-12-18
tags: [nodejs]
comments: true
share: true
---

ìµœê·¼ì— GraphQLì€ ë§ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. Node.jsë¡œ GraphQL ì„œë²„ë¥¼ êµ¬ì¶•í•˜ë ¤ë©´ Apollo Serverë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Apollo Serverë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ GraphQL ì„œë²„ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## ëª©ì°¨

- [Apollo Serverë€ ë¬´ì—‡ì¸ê°€](#apollo-serverë€-ë¬´ì—‡ì¸ê°€)
- [GraphQL ìŠ¤í‚¤ë§ˆ ì •ì˜í•˜ê¸°](#graphql-ìŠ¤í‚¤ë§ˆ-ì •ì˜í•˜ê¸°)
- [Apollo Serverë¡œ ì„œë²„ êµ¬ë™í•˜ê¸°](#apollo-serverë¡œ-ì„œë²„-êµ¬ë™í•˜ê¸°)
- [GraphQL ì¿¼ë¦¬ ë° ë®¤í…Œì´ì…˜ ì‹¤í–‰í•˜ê¸°](#graphql-ì¿¼ë¦¬-ë°-ë®¤í…Œì´ì…˜-ì‹¤í–‰í•˜ê¸°)

## Apollo Serverë€ ë¬´ì—‡ì¸ê°€

[Apollo Server](https://www.apollographql.com/docs/apollo-server/)ëŠ” GraphQLì„ ìœ„í•œ ì™„ì „í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ì„œë²„ì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ GraphQL ìŠ¤í‚¤ë§ˆ, ë¦¬ì¡¸ë²„, ë°ì´í„° ì†ŒìŠ¤ ë“±ì„ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©°, í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## GraphQL ìŠ¤í‚¤ë§ˆ ì •ì˜í•˜ê¸°

ë¨¼ì €, GraphQL ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ìŠ¤í‚¤ë§ˆëŠ” ë°ì´í„° ê·¸ë˜í”„ë¥¼ í‘œí˜„í•˜ë©°, ì¿¼ë¦¬, ë®¤í…Œì´ì…˜ ë“±ì˜ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì •ì˜í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œì…ë‹ˆë‹¤.

```graphql
type Query {
  hello: String
}

type Mutation {
  setMessage(message: String): String
}
```

ìœ„ì˜ ìŠ¤í‚¤ë§ˆëŠ” `hello` ì¿¼ë¦¬ì™€ `setMessage` ë®¤í…Œì´ì…˜ì„ ì •ì˜í•©ë‹ˆë‹¤.

## Apollo Serverë¡œ ì„œë²„ êµ¬ë™í•˜ê¸°

ì´ì œ Apollo Serverë¥¼ ì‚¬ìš©í•˜ì—¬ GraphQL ì„œë²„ë¥¼ êµ¬ë™í•´ ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì €, Expressì™€ í•¨ê»˜ `apollo-server-express` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install apollo-server-express express graphql
```

ë‹¤ìŒìœ¼ë¡œ, ì„œë²„ë¥¼ êµ¬ì„±í•˜ê³  ì‹¤í–‰í•  JavaScript ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```javascript
const { ApolloServer, gql } = require('apollo-server-express');
const express = require('express');

// ìŠ¤í‚¤ë§ˆ ì •ì˜
const typeDefs = gql`
  type Query {
    hello: String
  }

  type Mutation {
    setMessage(message: String): String
  }
`;

// ë¦¬ì¡¸ë²„ ì •ì˜
const resolvers = {
  Query: {
    hello: () => 'Hello from GraphQL',
  },
  Mutation: {
    setMessage: (_, { message }) => {
      // ë©”ì‹œì§€ ì²˜ë¦¬ ë¡œì§
      return message;
    },
  },
};

// Apollo Server ì„¤ì •
const server = new ApolloServer({ typeDefs, resolvers });

// Express ì•±ê³¼ ì—°ê²°
const app = express();
server.applyMiddleware({ app });

// ì„œë²„ ì‹œì‘
app.listen({ port: 4000 }, () =>
  console.log(`ğŸš€ Server ready at http://localhost:4000${server.graphqlPath}`)
);
```

## GraphQL ì¿¼ë¦¬ ë° ë®¤í…Œì´ì…˜ ì‹¤í–‰í•˜ê¸°

ì´ì œ ì„œë²„ê°€ ì‹¤í–‰ë˜ì—ˆìœ¼ë¯€ë¡œ, [Playground](https://www.apollographql.com/docs/apollo-server/testing/graphql-playground/) ë˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ GraphQL ì¿¼ë¦¬ì™€ ë®¤í…Œì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œì…ë‹ˆë‹¤.

ì¿¼ë¦¬:
```graphql
query {
  hello
}
```

ë®¤í…Œì´ì…˜:
```graphql
mutation {
  setMessage(message: "Hello, GraphQL!")
}
```

ì´ì œ Apollo Serverë¥¼ ì‚¬ìš©í•˜ì—¬ GraphQL ì„œë²„ë¥¼ êµ¬ì„±í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. Apollo ServerëŠ” ê°•ë ¥í•˜ê³  ìœ ì—°í•œ ë„êµ¬ë¡œ, GraphQL APIë¥¼ êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ê¸°ì— íƒì›”í•œ ì„ íƒì…ë‹ˆë‹¤. ê´€ë ¨ ìì„¸í•œ ë‚´ìš©ì€ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

---
**ì°¸ê³  ìë£Œ:**
- [Apollo Server ê³µì‹ ë¬¸ì„œ](https://www.apollographql.com/docs/apollo-server/getting-started/)