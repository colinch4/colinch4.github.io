---
layout: post
title: "[kotlin] Room λΌμ΄λΈλ¬λ¦¬μ λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤ κ΄€λ¦¬ λ°©λ²•"
description: " "
date: 2023-12-21
tags: [kotlin]
comments: true
share: true
---

μ•λ…•ν•μ„Έμ”! μ¤λμ€ **Room λΌμ΄λΈλ¬λ¦¬**λ¥Ό μ‚¬μ©ν•μ—¬ μ•λ“λ΅μ΄λ“ μ•±μ—μ„ λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤λ¥Ό κ΄€λ¦¬ν•λ” λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤. λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤λ¥Ό ν¨κ³Όμ μΌλ΅ κ΄€λ¦¬ν•¨μΌλ΅μ¨ μΏΌλ¦¬ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬ μ μμµλ‹λ‹¤. 

## 1. @Index μ–΄λ…Έν…μ΄μ… μ‚¬μ©ν•κΈ°

Room λΌμ΄λΈλ¬λ¦¬μ—μ„λ” **@Index μ–΄λ…Έν…μ΄μ…**μ„ μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ”μ ν•„λ“μ— μΈλ±μ¤λ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤. μλ¥Όλ“¤μ–΄, λ‹¤μμ€ μ‚¬μ©μμ μ΄λ¦„μ„ λ‚νƒ€λ‚΄λ” ν•„λ“μ— μΈλ±μ¤λ¥Ό μ¶”κ°€ν•λ” λ°©λ²•μ…λ‹λ‹¤.

```kotlin
@Entity
data class User(
    @PrimaryKey val id: Int,
    @ColumnInfo(name = "user_name") @Index val name: String
)
```

μ„μ μ½”λ“μ—μ„ `@Index` μ–΄λ…Έν…μ΄μ…μ€ `name` ν•„λ“μ— λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤λ¥Ό μ¶”κ°€ν•λ„λ΅ μ§€μ •ν•©λ‹λ‹¤.

## 2. λ³µν•© μΈλ±μ¤ μƒμ„±ν•κΈ°

λ•λ΅λ” ν•λ‚ μ΄μƒμ ν•„λ“λ¥Ό κ²°ν•©ν•μ—¬ λ³µν•© μΈλ±μ¤λ¥Ό μƒμ„±ν•΄μ•Όν•  μλ„ μμµλ‹λ‹¤. μ΄λ¬ν• κ²½μ°, **@Index μ–΄λ…Έν…μ΄μ…**μ„ μ‚¬μ©ν•μ—¬ λ³µν•© μΈλ±μ¤λ¥Ό λ§λ“¤ μ μμµλ‹λ‹¤.

```kotlin
@Entity
data class User(
    @PrimaryKey val id: Int,
    @ColumnInfo(name = "first_name") val firstName: String,
    @ColumnInfo(name = "last_name") val lastName: String,
    @Index(name = "index_name", value = ["first_name", "last_name"])
)
```

μ„μ μ½”λ“λ” `firstName` λ° `lastName` ν•„λ“λ¥Ό κ²°ν•©ν•μ—¬ `index_name` λ³µν•© μΈλ±μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

## 3. μΈλ±μ¤μ μ΄λ¦„ λ° κ³ μ μ„± μ§€μ •ν•κΈ°

λ•λ΅λ” μΈλ±μ¤μ μ΄λ¦„κ³Ό κ³ μ μ„±μ„ μ§€μ •ν•΄μ•Ό ν•  μλ„ μμµλ‹λ‹¤. μ΄λ•λ” **unique** νλΌλ―Έν„°μ™€ **name** νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•μ—¬ μΈλ±μ¤μ κ³ μ μ„±κ³Ό μ΄λ¦„μ„ μ§€μ •ν•  μ μμµλ‹λ‹¤.

```kotlin
@Entity
data class User(
    @PrimaryKey val id: Int,
    @ColumnInfo(name = "email") @Index(unique = true, value = ["email"], name = "index_email")
    val email: String
)
```

μ„μ μ½”λ“λ” `email` ν•„λ“μ— κ³ μ ν• μΈλ±μ¤λ¥Ό μ¶”κ°€ν•κ³ , **index_email**μ΄λΌλ” μ΄λ¦„μ„ μ§€μ •ν•©λ‹λ‹¤.

## κ²°λ΅ 

μ΄μƒμΌλ΅ **Room λΌμ΄λΈλ¬λ¦¬**λ¥Ό μ‚¬μ©ν•μ—¬ μ•λ“λ΅μ΄λ“ μ•±μ—μ„ λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤λ¥Ό κ΄€λ¦¬ν•λ” λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³΄μ•μµλ‹λ‹¤. **@Index μ–΄λ…Έν…μ΄μ…**μ„ μ‚¬μ©ν•μ—¬ λ‹¨μΌ λ° λ³µν•© μΈλ±μ¤λ¥Ό μ¶”κ°€ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄μ•μΌλ©°, μΈλ±μ¤μ μ΄λ¦„κ³Ό κ³ μ μ„±μ„ μ§€μ •ν•λ” λ°©λ²•μ— λ€ν•΄μ„λ„ μ‚΄ν΄λ³΄μ•μµλ‹λ‹¤. λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬μ μ„±λ¥ κ°μ„ μ„ μ„ν•΄ μ μ ν• μΈλ±μ¤λ¥Ό μ‚¬μ©ν•μ—¬ μ•λ“λ΅μ΄λ“ μ•±μ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μµμ ν™”ν•λ” λ° λ„μ›€μ΄ λκΈΈ λ°”λλ‹λ‹¤.

μ°Έκ³  λ¬Έν—:
- [Room Persistence Library κ³µμ‹ λ¬Έμ„](https://developer.android.com/reference/android/arch/persistence/room/package-summary)

κ°μ‚¬ν•©λ‹λ‹¤! π