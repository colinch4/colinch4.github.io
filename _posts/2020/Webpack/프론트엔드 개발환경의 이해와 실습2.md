---
layout: post
title: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´ì™€ ì‹¤ìŠµ 2"
description: " "
date: 2020-11-11
tags: [frontend]
comments: true
share: true
---

## 2ï¸âƒ£
### ğŸ–¥ ë°”ë²¨(Babel)
#### 3 - 1. á„‡á…¡á„‡á…¦á†¯á„‹á…´ á„€á…µá„‡á…©á†« á„€á…¢á„‚á…§á†·
- ğŸ˜¶ ë°°ê²½
- í¬ë¡œìŠ¤ë¸Œë¼ìš°ì§•ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ ë“±ì¥, 
- ECMAScript2015+ ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ëª¨ë“ ë¸Œë¼ìš°ì €ì—ì„œ ì¼ê´€ë˜ê²Œ ë™ì‘í•˜ë„ë¡ í˜¸í™˜ì„±ì„ ì§€ì¼œì¤Œ
- Typescript, JSX ì²˜ëŸ¼ ë‹¤ë¥¸ì–¸ì–´ë¡œ ë¶„ë¥˜ë˜ëŠ” ì–¸ì–´ë“¤ë„ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•˜ë„ë¡ ë§Œë“¤ì–´ì¤Œ

<br/>

- ğŸ˜¶ ì„¤ì¹˜ ë° ê¸°ë³¸ë™ì‘
- $ npm install @babel/core @babel/cli
- babel/cli -> í„°ë¯¸ë„ ë„êµ¬ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ
- babel ì‹¤í–‰ë°©ë²•
- 1. $ node_modules/.bin/babel
- 2. $ npx babel app.js(ë³€í™˜í•  íŒŒì¼)

<br/>

- **ë°”ë²¨ì€ ì½”ë“œë¥¼ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ ë¹Œë“œë¼ê³  í•˜ëŠ”ë°, ì„¸ë‹¨ê³„ë¡œ ë¹Œë“œë¥¼ ì§„í–‰í•œë‹¤**
- 1. íŒŒì‹± (Parsing) : ì½”ë“œë¥¼ ë°›ì•„ì„œ ê° í† í°ë³„ë¡œ ë¶„í•´
- 2. ë³€í™˜ (Transforming) : íŒŒì‹± ì´í›„ ë³€í™˜, es6 -> es5 ë¡œ ë³€í™˜ 
- 3. ì¶œë ¥ (Printing) : ë³€ê²½ëœ ê²°ê³¼ë¬¼ì„ ì¶œë ¥

<br/>

- ë°”ë²¨ì€ íŒŒì‹±ê³¼ ì¶œë ¥ì„ ë‹´ë‹¹í•˜ê³  ë³€í™˜ì€ **í”ŒëŸ¬ê·¸ì¸** ì´ë¼ëŠ” ë‹¤ë¥¸ ìš”ì†Œê°€ ë‹´ë‹¹í•œë‹¤.
- ğŸ˜¶ ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸
- ë¨¼ì € my-babel-plugin.js íŒŒì¼ ìƒì„± í›„ ì½”ë“œëŠ” [ê¹€ì •í™˜ë‹˜ë¸”ë¡œê·¸](https://jeonghwan-kim.github.io/series/2019/12/22/frontend-dev-env-babel.html)
- custom plugin ì„ ë§Œë“¤ë•ŒëŠ” visitor ê°ì²´ ë°˜í™˜ í•„ìˆ˜!
- $ npx babel --help -> ë°”ë²¨ help ë¬¸ì„œ 
- $ npx babel app.js(ì ìš©ì‹œí‚¬íŒŒì¼ëª…) --plugins './my-babel-plugin.js'(ë§Œë“  í”ŒëŸ¬ê·¸ì¸ íŒŒì¼ ëª…)

<img src="https://github.com/colinch4/colinch4.github.io/blob/master/_posts/2020/Webpack/images/webpack_babel_%ED%84%B0%EB%AF%B8%EB%84%90.png" width="70%">

- VariableDeclaration() ë¥¼ ì´ìš©í•˜ì—¬ ë³€ìˆ˜ í‚¤ì›Œë“œ(let, const)ë¥¼ var ë¡œ ë³€ê²½í•˜ëŠ”ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤ 

<br/>

- ğŸ˜¶ í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©í•˜ê¸°
- **block-scoping** : ë³€ìˆ˜í‚¤ì›Œë“œë¥¼ var ë¡œ ë³€ê²½í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ ( ë°”ë²¨ì—ì„œ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ )
- $ npm install @babel/plugin-transform-block-scoping

<img src="https://github.com/colinch4/colinch4.github.io/blob/master/_posts/2020/Webpack/images/webpack_%40babel:plugin-transform-block-scoping.png" width="70%">

- **arrow-functions** : arrow í•¨ìˆ˜ ë³€í™˜
- $ npm install @babel/plugin-transform-arrow-functions

<img src="https://github.com/colinch4/colinch4.github.io/blob/master/_posts/2020/Webpack/images/webpack_plugin_arrow.png" width="70%">

- **use-strict** êµ¬ë¬¸ì„ ì¶”ê°€í•´ì„œ ì—„ê²©ëª¨ë“œë¡œ ì‹¤í–‰í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤. -> **strict-mode**
- $ npm install @babel/plugin-transform-strict-mode

<br/>

- ì»¤ë©˜ë“œ ëª…ë ¹ì–´ê°€ ì ì  ê¸¸ì–´ì§€ê¸°ë•Œë¬¸ì—, babel.config.js ë¥¼ ìƒì„± í›„ ì´ìš©

```javascript
// babel.config.js
module.exports = {
  plugins: [
    "@babel/plugin-transform-block-scoping",
    "@babel/plugin-transform-arrow-functions",
    "@babel/plugin-transform-strict-mode",
  ],
};
```

- $ npx babel app.js

<img src="https://github.com/colinch4/colinch4.github.io/blob/master/_posts/2020/Webpack/images/webpack_babel%20config%20js.png" width="55%">

- ê¸°ë³¸ì ìœ¼ë¡œ babel.config.js íŒŒì¼ì„ ì½ì–´ì„œ í”ŒëŸ¬ê·¸ì¸ì„ ì ìš© ë³€í™˜í•œ ë’¤ ì¶œë ¥
- í”ŒëŸ¬ê·¸ì¸ì„ ì¼ì¼ì´ ì„¤ì •í•˜ëŠ”ê²ƒì€ ë¶ˆê°€ -> ëª©ì ì— ë§ê²Œ ì—¬ëŸ¬ê°€ì§€ í”ŒëŸ¬ê·¸ì¸ì„ ì„¸íŠ¸ë¡œ ëª¨ì•„ë‘  -> í”„ë¦¬ì…‹

<br/>

- ğŸ˜¶ ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹
- my-babel-preset.js ìƒì„±

```javascript
// my-babel-preset.js
module.exports = function myBabelPreset(){
    return {
      plugins: [
        "@babel/plugin-transform-block-scoping",
        "@babel/plugin-transform-arrow-functions",
        "@babel/plugin-transform-strict-mode",
      ],
    };
}

// babel.config.js
module.exports = {
    presets: [
        './my-babel-preset.js'
    ]
};
```

- ìœ„ëŠ” ì´ì „ê³¼ ë˜‘ê°™ì€ ê²°ê³¼ë¥¼ ì–»ëŠ”ë‹¤. ( ì˜ ì‘ë™í•œë‹¤. )

#### 3 - 2. ë°”á„‡á…¦á†¯ á„‰á…¡á„‹á…­á†¼á„‡á…¥á†¸á„€á…ª á„‹á…°á†¸á„‘á…¢á†¨ á„á…©á†¼á„’á…¡á†¸
- ğŸ˜¶ í”„ë¦¬ì…‹ ì‚¬ìš©í•˜ê¸°
- preset-env / preset-flow / preset-react / preset-typescript
- preset-env : ECMAScript2015+ ë³€í™˜í• ë•Œ ì‚¬ìš©
- $ npm i @babel/preset-env

```javascript
// babel.config.js
module.exports = {
    presets: [
        '@babel/preset-env'
    ]
};
```

- ğŸ˜¶ íƒ€ê²Ÿ ë¸Œë¼ìš°ì ¸
- presetì„ ì‚¬ìš©í• ë•Œ ë³€í™˜í•˜ëŠ” ì½”ë“œëŠ” íŠ¹ì •ë¸Œë¼ìš°ì ¸ë¥¼ ì§€ì›í•´ì•¼í•œë‹¤ëŠ” ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤.

```javascript
// babel.config.js
module.exports = {
    presets: [
        ['@babel/preset-env', {
            targets: {
                chrome: '79',
                ie: '11'
            }
        }]
    ]
};
```

- chrome ê³¼ ie ì— ëª¨ë‘ ì‘ë™í•˜ëŠ” ì½”ë“œì—¬ì•¼ í•´ì„œ const -> let / arrow -> function
- chromeë§Œ ì ì—ˆì„ë•ŒëŠ” ê¸°ì¡´ const, arrow ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆì—ˆë‹¤.

<br/>

- ğŸ˜¶ í´ë¦¬í•„
- í”ŒëŸ¬ê·¸ì¸ì´ í”„ë¼ë¯¸ìŠ¤ë¥¼ ECMAScript5 ë²„ì „ìœ¼ë¡œ ë³€í™˜í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒí–ˆì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤.
- ë°”ë²¨ì€ ECMAScript2015+ë¥¼ ECMAScript5 ë²„ì „ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆëŠ” ê²ƒë§Œ ë¹Œë“œí•œë‹¤. 
- ê·¸ë ‡ì§€ ëª»í•œ ê²ƒë“¤ì€ **"í´ë¦¬í•„"**ì´ë¼ê³  ë¶€ë¥´ëŠ” ì½”ë“œì¡°ê°ì„ ì¶”ê°€í•´ì„œ í•´ê²°í•œë‹¤.
- preset-env ì—ëŠ” íƒ€ê²Ÿë¸Œë¼ìš°ì ¸ ë¿ë§Œì•„ë‹ˆë¼ í´ë¦¬í•„ì„ ì‚¬ìš©í• ì§€ ë§ì§€ì— ëŒ€í•´ì„œë„ ì„¤ì • ê°€ëŠ¥

```javascript
// babel.config.js
module.exports = {
    presets: [
        ['@babel/preset-env', {
            targets: {
                chrome: '79',
                ie: '11'
            },
            useBuiltIns: 'usage', // 'entry', false ì •í™•í•œ ì´ìœ ëŠ” ëª¨ë¥´ì§€ë§Œ ê²°ê³¼ê°’ì€ ë‹¤ë¥´ê²Œ ë‚˜ì˜¨ë‹¤ê³  í•œë‹¤.
            corejs: {
                version: 2 // ê°€ì¥ ìµœê·¼ ë²„ì „ì€ 3 ì´ì§€ë§Œ ë¬¸ì„œëŠ” 2ë¥¼ ë”°ëê¸°ë•Œë¬¸ì— 
            }
        }]
    ]
};
```

<br/>

- ğŸ˜¶ ì›¹íŒ©ìœ¼ë¡œ í†µí•©í•˜ëŠ” ë°©ë²•
- ì‹¤ë¬´ì—ì„œëŠ” ë°”ë²¨ì„ ì§ì ‘ í„°ë¯¸ë„ë¡œ ë¹Œë“œí•˜ê¸°ë³´ë‹¤ëŠ” ì›¹íŒ©ìœ¼ë¡œ í†µí•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¼ë°˜ì 
- babel-loader ì‚¬ìš© : $ npm i babel-loader

```javascript
// webpack.config.js
module.exports = {
    //...
  module: {
    rules: [
        //...
      {
        test: /\.js$/,
        loader: 'babel-loader',
        exclude: /node_modules/ // node_modules ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì²˜ë¦¬í•˜ì§€ ì•Šë„ë¡ ì œì™¸
      }
    ],
  },
};

```

- loader ì´ê¸° ë•Œë¬¸ì— rules ì— ì¶”ê°€í•´ì£¼ê³ , entry í¬ì¸íŠ¸ê°€ ë‹¬ë¼ì¡Œê¸°ë•Œë¬¸ì— './app.js' ë¡œ ë³€ê²½í•´ì£¼ì—ˆë‹¤.
- ì´í›„ $ npm run build í–ˆì„ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•œê²ƒì„ ì•Œìˆ˜ìˆëŠ”ë°, corejs ë¥¼ node_modulesì—ì„œ ì°¾ì„ìˆ˜ì—†ê¸°ë•Œë¬¸ì´ë‹¤.
- ê·¸ë ‡ê¸°ë•Œë¬¸ì— corejs ë¥¼ ì„¤ì¹˜í•´ì¤€ë‹¤.
- $ npm i core-js@2 (íŠ¹ì • ë²„ì „ ì„¤ì¹˜ë¥¼ ì›í• ë•ŒëŠ” @ ë¥¼ ë¶™ì—¬ì¤€ë‹¤.)

#### 3 - 4. ë°”ë²¨(í’€ì´)
- 1. $npm i babel-loader -> webpack.config.js babel-loader ì…‹íŒ… 
- 2. test:js ë¥¼ ë§Œë‚˜ê²Œë˜ë©´ babel-loader / babel ì„ ì‹¤í–‰í•˜ê²Œ ë˜ëŠ”ë°, babel-core í•„ìš” -> $ npm i @babel/core
- 3. babel.config.js ìƒì„± -> @babel/preset-env ë¥¼ ì‚¬ìš©í•˜ê¸°ë•Œë¬¸ì— @babel/preset-env ì„¤ì¹˜ í•„ìš” -> $ npm i @babel/preset-env
- 4. $ npm run build -> main.js const=>var ë¡œ ë³€ê²½ë¨ì„ í™•ì¸ ê°€ëŠ¥ / ê·¸ëŸ¬ë‚˜ promise ëŠ” ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŒ -> í´ë¦¬í•„ ì„¤ì • í•„ìš”
- 5. babel.config.js ì—ì„œ íƒ€ê²Ÿë¸Œë¼ìš°ì €ì„¤ì •, useBuiltIns: 'usage'(ieê°€ ì¸ì‹í•˜ì§€ëª»í•˜ëŠ” ì½”ë“œê°€ ìˆëŠ”ë¶€ë¶„ì„ ì„í¬íŠ¸í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€), corejs/version(ì„í¬íŠ¸ë  ë¼ì´ë¸ŒëŸ¬ë¦¬)
> async await ëŠ” corejs ë¡œ ë³€í™˜í• ìˆ˜ì—†ë‹¤ -> $ npm i regenerator-runtime
- 6. webpack.config.js babel-loader exclude ë¥¼ ì´ìš©í•´ì„œ node_modules ì•ˆì— íŒŒì¼ì€ ì ìš©ë˜ì§€ ì•Šë„ë¡ í•„ìš”

#### 3 - 5. ì‚¬ìŠ¤(ì‹¤ìŠµ)
- ì‚¬ìŠ¤ì–¸ì–´ -> css ë¡œ ë°”ë€ŒëŠ” ì „ì²˜ë¦¬ ì–¸ì–´

#### 3 - 6. ì‚¬ìŠ¤(í’€ì´)
- 1. $ npm install sass-loader node-sass
> node-sass : ì½”ë“œë¥¼ css ë¡œ ì»´íŒŒì¼ í•´ì£¼ëŠ” ì—­í•  / sass-loader: ì›¹íŒ©ì—ì„œ sass íŒŒì¼ì„ ë§Œë‚˜ë©´ node-sass ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ëŒë ¤ì£¼ëŠ” ì—­í• 
- 2. webpack.config.js ì—ì„œ test: scss | css ë³€ê²½ / useì—ì„œë„ sass-loader ì¶”ê°€
> use ëŠ” ë’¤ì—ì„œ ë¶€í„° ì•ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤ ì¦‰ sass-loader ë¥¼ ë§Œë‚˜ì„œ css ë¡œ ë³€ê²½í•´ì£¼ê³  css-loaderì—ì„œ style-loaderë¡œ !







