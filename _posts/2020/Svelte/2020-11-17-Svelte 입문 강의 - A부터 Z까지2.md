---
layout: post
title: "Svelte ì…ë¬¸ ê°•ì˜ - Aë¶€í„° Zê¹Œì§€ 2"
description: " "
date: 2020-11-17
tags: [svelte]
comments: true
share: true
---

## 2ï¸âƒ£
### ğŸ–¥ Props
#### 3 - 1. ì •ì˜ ë°©ë²•

```javascript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
<script>
import Child from './Child.svelte'
</script>

<Child test="JJì…ë‹ˆë‹¤." />

// ìì‹ ì»´í¬ë„ŒíŠ¸
<script>
export let test;
</script>

<p>{test}</p>

// ë¶€ëª¨ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ props ì „ë‹¬ì´ ê°€ëŠ¥í•˜ë‹¤
```

- svelteì—ì„œ export ëŠ” ë¶€ëª¨ì»´í¬ë„ŒíŠ¸ -> ìì‹ì»´í¬ë„ŒíŠ¸ë¡œ ê°’ì„ ì „ë‹¬ë°›ì•˜ë‹¤ ë¼ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©

#### 3 - 2. ê¸°ë³¸ê°’ ì„¤ì •
- props ì˜ ê¸°ë³¸ê°’ì„ ì„¤ì •í•´ ì£¼ì§€ ì•Šìœ¼ë©´ , undefined ë¼ëŠ” ê°’ì´ ì¶œë ¥ ëœë‹¤.

```javascript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
<script>
import Child from './Child.svelte'
</script>

<Child name="JJ"></Child>
<Child></Child>

//ìì‹ ì»´í¬ë„ŒíŠ¸
<script>
export let name = "nope";
</script>

<p>ì´ë¦„ì€ {name} ì…ë‹ˆë‹¤</p>
```

- ë§Œì•½ ìœ„ì—ì„œ 'export let name' ì´ì—ˆë‹¤ë©´, undefined ë¼ëŠ” ê°’ì´ ì¶œë ¥ë˜ì§€ë§Œ 
- ìœ„ì™€ ê°™ì´ ê¸°ë³¸ê°’ì„ ì„¤ì •í•œë‹¤ë©´ ì¶œë ¥ë˜ëŠ” ê°’ì€ ì•„ë˜ì™€ ê°™ë‹¤

<pre><code>ì´ë¦„ì€ JJ ì…ë‹ˆë‹¤
ì´ë¦„ì€ nope ì…ë‹ˆë‹¤</code></pre>

#### 3 - 3. Spread ë¬¸ë²• ì‚¬ìš©í•˜ê¸°
- Spread : í¼ì¹˜ê¸°
- props ì— spread ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë©´ ë§ì€ ì–‘ì˜ propsë¥¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•´ì•¼í• ë•Œ ì½”ë“œì–‘ì„ ì¤„ì¼ ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.

```javascript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
<script>
	import Child from './Child.svelte'

	let name = "jj";
	let job = "developer"
	let website = "https://jina95.github.io/"
</script>

<Child {name} {job} {website}></Child>

// ìì‹ ì»´í¬ë„ŒíŠ¸
<script>
export let name;
export let job;
export let website;
</script>

<p>{name}, {job}, {website}</p>
```

- name = {name} í•´ì•¼í•˜ì§€ë§Œ(ì†ì„±ì´ë¦„ = {ë³€ìˆ˜ì´ë¦„}), ì†ì„±ì´ë¦„ê³¼ ë³€ìˆ˜ì´ë¦„ì´ ë™ì¼í• ë•ŒëŠ” ìƒëµ ê°€ëŠ¥ !

> <Child name = {name} {job} {website}></Child>

- ìŠ¤í”„ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ë°”ê¾¼ë‹¤ë©´ ë¶€ëª¨ì»´í¬ë„ŒíŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë°”ê¿€ ìˆ˜ ìˆë‹¤.

```javascript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
<script>
    import Child from './Child.svelte'
    let info = {
		name : "jj",
		job : "developer",
		website : "https://jina95.github.io/"
	}
</script>

<Child {...info}></Child>
```


### ğŸ–¥ ë…¼ë¦¬ ë¸”ë¡
#### 4 - 1. ì¡°ê±´ë¬¸ ë¸”ë¡
- svelte ì—ì„œ if ë¬¸ì„ ì‚¬ìš©í• ë•ŒëŠ” {#if}, {:else} ë¥¼ ì‚¬ìš©í•œë‹¤ 
- ëª¨ë“  ì¡°ê±´ë¬¸ì´ ëë‚¬ì„ë•ŒëŠ” {/if} ë¡œ ë§ˆë¬´ë¦¬ í•´ì¤€ë‹¤.

```javascript
{#if x > 10}
	<p>{x}ëŠ” 10ë³´ë‹¤ í½ë‹ˆë‹¤</p>
{:else if x > 5}
	<p>{x}ëŠ” 5ë³´ë‹¤ í½ë‹ˆë‹¤</p>
{:else}
	<p>{x}ëŠ” 5ë³´ë‹¤ ì‘ìŠµë‹ˆë‹¤</p>
{/if}
```

#### 4 - 2. ë°˜ë³µë¬¸ ë¸”ë¡
- ë°˜ë³µë¬¸ì€ ì´ìš©í• ë•ŒëŠ” {#each ë¦¬ìŠ¤íŠ¸ as item} , ë‹«ì„ë•ŒëŠ” {/each}
- ë°˜ë³µë¬¸ ì¸ë±ìŠ¤ë¥¼ ì´ìš©í• ë•ŒëŠ” {#each ë¦¬ìŠ¤íŠ¸ as item, i}


```javascript
<script>
	let list = [
		{id: 1, text: 'test 1'},
		{id: 2, text: 'test 2'},
		{id: 3, text: 'test 3'},
	]
</script>


<ul>
	{#each list as item, i}
	<li>{i}: {item.id}, {item.text}</li>
	{/each}
</ul>

// êµ¬ì¡°ë¬¸ë²•ì„ ì´ìš©í•´ì„œ ì•„ë˜ì™€ ê°™ì´ ë‚˜íƒ€ë‚¼ìˆ˜ë„ìˆë‹¤.
<ul>
	{#each list as {id, text}, i}
	<li>{i}: {id}, {text}</li>
	{/each}
</ul>
```

#### 4 - 3. ë°˜ë³µë¬¸ ë¸”ë¡ì— Key ì§€ì •í•˜ê¸°

```javascript
<script>
	let list = [
		{id: 1, text: 'test 1'},
		{id: 2, text: 'test 2'},
		{id: 3, text: 'test 3'},
	]

	function addItem(){
		const id = Math.max(...list.map(x => x.id)) + 1;
		list = [...list, {id, text: `test${id}`}];
	}

	function removeItem(){
		list.shift();
		list = list;
	}

	function resetItem(){
		list = [
			{ id: 1, text: 'test 1' },
			{ id: 2, text: 'test 2' },
			{ id: 3, text: 'test 3' },
		]
	}
</script>

<button on:click={ addItem }>Add</button>
<button on:click={ removeItem }>Remove</button>
<button on:click={ resetItem }>Reset</button>

<ul>
	{#each list as item (item.id)}
	<li>{item.id}, {item.text}</li>
	{/each}
</ul>
```

- (id) keyê°’ì„ ì£¼ëŠ”ê²ƒ
- keyê°’ ì—†ì´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•˜ë‹¤ë³´ë©´ ì „ì²´ë¥¼ ì—…ë°ì´íŠ¸ë¥¼ í•´ì„œ ë¹„íš¨ìœ¨ì 
- í•´ë‹¹í•˜ëŠ” id ë§Œ ì§€ìš°ë ¤ë©´, keyê°’ì„ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.
- key ê°’ì— ê°ì²´ë„ ì˜¬ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ keyê°’ì€ ìŠ¤íŠ¸ë§ì´ë‚˜ ë„˜ë²„ê°€ ì¢‹ë‹¤! 

#### 4 - 4. await ë¸”ë¡
- {#await í”„ë¡œë¯¸ìŠ¤ê°ì²´} {:then data} {:catch error} ë‹«ì„ë•ŒëŠ” {/await}
- await ì™€ then ì‚¬ì´ì—ëŠ” ì‘ë‹µì´ ì˜¬ë•Œê¹Œì§€ ì¶œë ¥í•˜ëŠ” html
- then ê³¼ catch ì‚¬ì´ëŠ” ì‘ë‹µê²°ê³¼ë¥¼ ì¶œë ¥

```javascript
<script>
	let promise;
	function sayHello(){
		return new Promise((resolve,reject) => {
			setTimeout(()=> {
				// resolve('Hello World');
				reject(new Error('ì—ëŸ¬ë°œìƒ!'))
			}, 1000)
		})
	}
	function handleClick(){
		promise = sayHello();
	}
</script>


<button on:click={handleClick}>ì¸ì‚¬í•˜ê¸°</button>

{#await promise}
	<p>ì¸ì‚¬ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</p>
{:then data}
	<p>{data}</p>
{:catch error}
	<p>{error.message}</p>
{/await}
```

- then ì„ ì•„ë˜ì™€ ê°™ì´ ìƒëµ í•  ìˆ˜ë„ ìˆë‹¤.

```javascript
{#await promise then data}
	<p>{data}</p>
{/await}
```

- ìœ„ì™€ ê°™ì´ ìƒëµí•˜ë©´, ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì—ëŠ” ì•„ë¬´ê²ƒë„ ëœ¨ì§€ ì•ŠëŠ”ë‹¤ ( ê³µë°± )



### ğŸ–¥ ì´ë²¤íŠ¸ ë‹¤ë£¨ê¸°
#### 5 - 1. DOM ì´ë²¤íŠ¸
- svelte ì—ì„œëŠ” ëª¨ë“  DOM ì´ë²¤íŠ¸ê°€ ê°€ëŠ¥í•´ì„œ on:ì´ë²¤íŠ¸ì´ë¦„ ì„ ì ì–´ì£¼ë©´ ëª¨ë“  ì´ë²¤íŠ¸ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë‹¤.

```javascript
<script>
	let m = { x:0, y:0}
	let isEnter = false;
	function handleMousemove(event){
		m.x = event.clientX;
		m.y = event.clientY;
	}

	function handleMouseenter() {
		isEnter = true;
	}

	function handleMouseleave(){
		isEnter = false;
	}
</script>


<div on:mousemove={handleMousemove}>
	ë§ˆìš°ìŠ¤ ìœ„ì¹˜ : {m.x}, {m.y}
	<div 
		on:mouseenter={handleMouseenter}
		on:mouseleave={handleMouseleave}
		>
		{ isEnter ? 'Enter' : 'Leave'}
	</div>
</div>


<style>
	div {
		width: 100%;
		height: 100%;
	}
	div > div {
		width: 100px;
		height: 100px;
		background-color: yellow;
	}
</style>
```

#### 5 - 2. ì¸ë¼ì¸ í•¸ë“¤ëŸ¬

```javascript
<script>
	let m = { x:0, y:0}
</script>

<div on:mousemove={e => m = {x : e.clientX, y: e.clientY}}>
	ë§ˆìš°ìŠ¤ ìœ„ì¹˜ : {m.x}, {m.y}
</div>
```

- ì¸ë¼ì¸í•¸ë“¤ëŸ¬ëŠ” ì²«ë²ˆì§¸ ì¸ìì˜ ë”ì´ë²¤íŠ¸ì´ê¸° ë•Œë¬¸ì— e ê°ì²´ê°€ ì˜¬ê²ƒ 
- ìŠ¤ë²¨íŠ¸ëŠ” ì»´íŒŒì¼ë˜ë©´ì„œ ìµœì í™” ë˜ê¸°ë•Œë¬¸ì— ì¸ë¼ì¸í•¸ë“¤ëŸ¬ ê°€ëŠ¥ ( ëª‡ í”„ë ˆì„ì›Œí¬ëŠ” ì¸ë¼ì¸í•¸ë“¤ëŸ¬ê°€ ì„±ëŠ¥ìƒì˜ ë¬¸ì œë¡œ ë¶ˆê°€)

#### 5 - 3. ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´
- preventDefault() ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´
- on:ë”ì´ë²¤íŠ¸ | ì´ë²¤íŠ¸ìˆ˜ì‹ì–´ = {} ex(on:click|once={handleClick})
- once : í´ë¦­ì´ë²¤íŠ¸ê°€ í•œë²ˆë§Œ ì¼ì–´ë‚¨ì„ ëª…ì‹œ

```javascript
<script>
	function handleClick(){
		alert('CLICK')
	}
</script>

<button on:click|once={handleClick}>
	Click
</button>
```

<pre><code>preventDefault: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ê¸° ì „ event.preventDefault()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. íƒœê·¸ì˜ ê¸°ë³¸ ë™ì‘ì„ ë§‰ëŠ” ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´ì…ë‹ˆë‹¤.
stopPropagation: event.stopPropagation()ì´ í˜¸ì¶œë©ë‹ˆë‹¤. ì´ë²¤íŠ¸ê°€ ë‹¤ìŒ ìš”ì†Œë¡œ íë¥´ëŠ” ê²ƒì„ ë§‰ëŠ” ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´ì…ë‹ˆë‹¤.
passive: í„°ì¹˜ í˜¹ì€ íœ  ì´ë²¤íŠ¸ë¡œ ë°œìƒí•˜ëŠ” ìŠ¤í¬ë¡¤ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´ì…ë‹ˆë‹¤. SvelteëŠ” ì•ˆì „í•œ ê³³(?)ì— ìë™ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
capture: ë²„ë¸”ë§ ë‹¨ê³„ê°€ ì•„ë‹Œ ìº¡ì²˜ ë‹¨ê³„ì—ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
once: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë‹¨ í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´ì…ë‹ˆë‹¤.
self: event.targetê³¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì •ì˜í•œ ìš”ì†Œê°€ ê°™ì„ ë•Œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´ì…ë‹ˆë‹¤.

ìœ„ì˜ ì´ë²¤íŠ¸ ìˆ˜ì‹ì–´ë¥¼ on:click|once|capture={...}ì™€ ê°™ì´ ì²´ì¸(chain)ìœ¼ë¡œ ì—°ê²°í•´ ì—¬ëŸ¬ ê°œë¥¼ ì •ì˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤
</code></pre>

- ì°¸ê³ ì‚¬ì´íŠ¸ : [svelte ì´ë²¤íŠ¸ë‹¤ë£¨ê¸°](https://beomy.github.io/tech/svelte/events/)

#### 5 - 4. ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸

```javascript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
<script>
import Child from './Child.svelte'

function handleMessage(event){
	alert(event.detail.text)
}
</script>

<Child on:message={handleMessage}></Child>

// ìì‹ ì»´í¬ë„ŒíŠ¸
<script>
    import { createEventDispatcher } from 'svelte'

    const dispatch = createEventDispatcher();

    function sayHello(){
        dispatch('message', {
            text: 'hello!'
        });
    }
</script>

<button on:click={sayHello}>Click</button>
```

- createEventDispatcher ë¥¼ ì´ìš©í•´ì„œ ì´ë²¤íŠ¸ë¥¼ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬
- event.detail / detail ì´ë¼ëŠ” ì˜µì…˜ ì•ˆì— ìì‹ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ë‹¬ë°›ì€ ê°’ì´ ë‹´ê²¨ ì˜¤ê²Œ ëœë‹¤.
- svelte ëŠ” ìì‹ -> ìƒìœ„ ì´ë²¤íŠ¸ ì „ë‹¬í• ë•Œ ìì²´ì ìœ¼ë¡œ CustomEvent() ìƒì„±ìë¥¼ ìƒì„±í•´ì„œ ì´ë²¤íŠ¸ ì „ë‹¬
- ì°¸ê³ ì‚¬ì´íŠ¸ : [CustomEvent()](https://developer.mozilla.org/ko/docs/Web/API/CustomEvent/CustomEvent)

#### 5 - 5. ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ ë°œìƒì‹œ ì£¼ì˜ì‚¬í•­
- dispatch í•¨ìˆ˜ëŠ” í•­ìƒ ìµœìƒìœ„ ìŠ¤ì½”í”„ì— ì¡´ì¬í•´ì•¼ í•¨ ( ex sayhello í•¨ìˆ˜ ì•ˆì— ì •ì˜ ë˜ì–´ì„œ ì‚¬ìš©ë˜ë©´ ë™ì‘ì´ ì œëŒ€ë¡œ í•˜ì§€ X)
- ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ëŠ” ë”ì´ë²¤íŠ¸ì™€ ë‹¬ë¦¬ ì´ë²¤íŠ¸ê°€ ë²„ë¸”ë˜ì§€ ì•ŠëŠ”ë‹¤
- í•˜ìœ„ì—ì„œ ìƒìœ„ì»´í¬ë„ŒíŠ¸ë¡œ ìë™ìœ¼ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤. (ê·¸ë˜ì„œ í•˜ìœ„ì—ì„œ ìƒìœ„ë¡œ ì˜¬ë¦¬ê¸° ìœ„í•´ dispatchë¥¼ ì´ìš©í•œê²ƒ)

```javascript
// ì¶”ê°€ëœ ì»´í¬ë„ŒíŠ¸
<script>
    import Child from './Child.svelte'
    import { createEventDispatcher } from 'svelte'

    const dispatch = createEventDispatcher();

    function handleMessage(event) {
        dispatch('message', event.detail.text)
    }
</script>

<Child on:message={handleMessage}/>
// í•˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ë„ ê°€ëŠ¥í•˜ë‹¤ê³  í•˜ëŠ”ë°, ë‚´ê°€ í–ˆì„ë• ë­”ê°€ ì˜ ì•ˆë¬ë‹¤..

<script>
    import Child from './Child.svelte'
</script>

<Child on:message/>
```