---
layout: post
title: "Svelte ì…ë¬¸ ê°•ì˜ - Aë¶€í„° Zê¹Œì§€ 4"
description: " "
date: 2020-11-17
tags: [Svelte]
comments: true
share: true
---

## 4ï¸âƒ£
### ğŸ–¥ Store
#### 9 - 2. Writable stores
- writable ì˜ ì¸ìê°’ì€ ê³µìœ í•  ìì›ì˜ ì´ˆê¸°ê°’ì„ ì§€ì •
- writable ì˜ return ê°’ì€ ê³µìœ í•  store
- store : set update subscribe ì„¸ê°œë¥¼ í¬í•¨í•˜ëŠ” ê°ì²´

```javascript
// src/ stores.js
import { writable } from 'svelte/store'

export const count = writable(0);

// src/ App.svelte
<script>
	import { onDestroy } from 'svelte'
	import { count } from './stores.js'

	import Incrementer from './Incrementer.svelte'
	import Decrementer from './Decrementer.svelte'
	import Resetter from './Resetter.svelte'

	let countValue ;

	const unSubscribe = count.subscribe(value => countValue = value);
	onDestroy(unSubscribe)
</script>
	// subscribe ëŠ” countì— ê°’ì´ ë³€ê²½ë ë•Œë§ˆë‹¤ subscribeì— ì „ë‹¬ë  í•¨ìˆ˜ê°€ ì½œë°±ëœë‹¤ ?  
	// ë¬´ìŠ¨ë§ì¸ì§€ ì˜ ëª¨ë¥´ê² ë‹¤..
	// resetter ë‚˜ incrementer ë“±ì—ì„œ ë²„íŠ¼ì´ ëˆŒë ¤ì ¸ì„œ countì˜ ê°’ì´ ì—…ë°ì´íŠ¸ ë¬ì„ë•Œ subcscribeì— ì¸ìë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤...?

	// countì— ê°’ì´ ë³€ê²½ë ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸°ë•Œë¬¸ì— onDestroyë¥¼ í†µí•´ subscribe ë¥¼ í•´ì§€í•´ì•¼í•œë‹¤ê³  í•˜ëŠ”ë°,
	// ì‹¤ìŠµì„ í•´ë´ì•¼í™•ì‹¤íˆ ì•Œê²ƒê°™ë‹¤.. ì™œ í•´ì§€í•´ì•¼í•˜ëŠ”ì§€..!?

<p>count : { countValue } </p>

<Incrementer></Incrementer>
<Decrementer></Decrementer>
<Resetter></Resetter>
```

#### 9 - 3. Store ìë™ êµ¬ë…
- ìë™êµ¬ë…ì´ë€ ?
- count ê°’ ë³€ê²½ -> ë³€ìˆ˜ ì—…ë°ì´íŠ¸ -> í™”ë©´ ë…¸ì¶œ -> ì»´í¬ë„ŒíŠ¸ì œê±° -> onDestroyì—ì„œ ê´€ì°°í•¨ìˆ˜ ì œê±° 
- => ìœ„ì˜ ê³¼ì •ì„ ìë™êµ¬ë…ì´ ëŒ€ì‹ í•´ì£¼ê²Œ ëœë‹¤.
- count -> $count ë¡œ ëŒ€ì²´
- ê¸°ì¡´ incrementer ê³¼ ê°™ì€ í•¨ìˆ˜ì—ì„œ ì—…ë°ì´íŠ¸ í•´ì£¼ë˜ ë¶€ë¶„ì„ ex $count = $count - 1 ì´ëŸ°ì‹ìœ¼ë¡œ ë³€ê²½í•´ ì¤„ ìˆ˜ ìˆë‹¤.
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìŠ¤ë²¨íŠ¸ëŠ” ë³€ìˆ˜ ì„ ì–¸ì‹œ, ë³€ìˆ˜ëª… ì•ì— $ ë¥¼ ë¶™ì¼ìˆ˜ ì—†ë‹¤.

#### 9 - 4. Readable stores
- ì‚¬ìš©ìê°€ ìˆ˜ì •í•  í•„ìš” ì—†ëŠ” ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ì–´ì•¼ í•  ë•Œ ì‚¬ìš©

<pre><code>-   `initial`: ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ì´ˆê¹ƒê°’ì…ë‹ˆë‹¤. ì´ˆê¹ƒê°’ì„ ì„¤ì •í•  í•„ìš”ê°€ ì—†ì„ ê²½ìš°,  `null`ì´ë‚˜  `undefined`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-   `start`: ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ì²« êµ¬ë…ìê°€ ë°œìƒí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.  `set`  ì½œë°± í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ê°€ì§€ê³   `stop`  í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
-   `set`: ê´€ì°°í•˜ê³  ìˆëŠ” ê°’ì„ ë³€ê²½í•˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.
-   `stop`: ëª¨ë“  êµ¬ë…ìê°€ êµ¬ë…ì„ ì¤‘ë‹¨í•˜ë©´ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.  `start`  í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ëœ ìì›ë“¤ì´ ìˆë‹¤ë©´, ì´ í•¨ìˆ˜ ë‚´ì—ì„œ ìì›ì„ í•´ì œí•´ì•¼ í•©ë‹ˆë‹¤.</code></pre>

```javascript
// src/ stores.js
import { readable } from 'svelte/store'

export const time = readable(new Date(), function (set) {
    const interval = setInterval(()=> {
        set(new Date())
    }, 1000)
    return function stop () {
        clearInterval(interval)
    }
})
```

#### 9 - 5. Derived stores
- Derived storesë¥¼ ì´ìš©í•˜ë©´ ê¸°ì¡´ì˜ ìŠ¤í† ì–´ë“¤ì„ ì´ìš©í•´ì„œ ìƒˆë¡œìš´ ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆë‹¤.

<pre><code>-   ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ì°¸ê³ í•˜ëŠ” storeì…ë‹ˆë‹¤. ì°¸ê³ í•˜ëŠ” storeê°€ í•˜ë‚˜ë¼ë©´  `derived(a, ...)`ìœ¼ë¡œ ê°ì²´ê°€ ë©ë‹ˆë‹¤. ì°¸ê³ í•˜ëŠ” storeê°€ ì—¬ëŸ¬ ê°œë¼ë©´  `derived([a, ...b], ...)`ë¡œ ë°°ì—´ì´ ë©ë‹ˆë‹¤.
-   ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ìƒˆë¡œìš´ storeì˜ ê°’ì„ ë¦¬í„´í•˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤. ì½œë°± í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ëŠ” ì°¸ê³ í•˜ëŠ” storeì…ë‹ˆë‹¤. ì½œë°± í•¨ìˆ˜ì˜ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ëŠ”  `set`  í•¨ìˆ˜ì…ë‹ˆë‹¤.  `derived([a, ...b], ([$a, ...$b], set) => ...)`ì™€ ê°™ì€ í˜•íƒœì…ë‹ˆë‹¤.
-   ì„¸ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ìƒˆë¡œìš´ storeì˜ ì´ˆê¹ƒê°’ì…ë‹ˆë‹¤. </code></pre>

```javascript
// src/ stores.js

// í˜ì´ì§€ì— ì ‘ì†í•˜ê³  ë‚˜ì„œ ëª‡ì´ˆê°€ ì§€ë‚¬ëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” í•¨ìˆ˜
const start = new Date();
export const elapsed = derived(time, ($time) => {
  return Math.round(($time - start) / 1000);
});
// ì „ 9-4ì—ì„œ ì‚¬ìš©í–ˆë˜ time ì´ìš©
```

#### 9 - 6. Custom stores

```javascript
// src/ stores.js
import { writable } from 'svelte/store'

function createCount() {
    const { set, subscribe, update } = writable(0)

    return {
        subscribe,
        increment: () => update(x => x + 1),
        decrement: () => update(x => x - 1),
        reset: () => set(0),
    }
}

export const count = createCount();
// ìœ„ì™€ ê°™ì´ countë¼ëŠ” ì»¤ìŠ¤í…€ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ìˆ˜ ìˆë‹¤.

// src/App.svelte
<script>
import { count } from './stores.js'
console.log(count);

</script>

<p>{ $count }</p>
<button on:click={count.increment}>+</button>
<button on:click={count.decrement}>-</button>
<button on:click={count.reset}>reset</button>
```

#### 9 - 7. Store bindings


```javascript
// src/ stores.js
import { writable, derived } from 'svelte/store'

export const name = writable('james')

export const greeting = derived(
    name,
    $name => `Hello, ${$name}`
)

// src/App.svelte
<script>
import { name, greeting } from './stores.js'
</script>

<p>{ $greeting }</p>
<input type="text" bind:value={$name} />

<button on:click={()=> $name += '!'}>Add!!!</button>
```

### ğŸ–¥ Motion
#### 10 - 1. Motion ì´ë€
- ìŠ¤ë²¨íŠ¸ëŠ” ë³€ìˆ˜ë¥¼ ë”ì— ë°”ì¸ë”©í•˜ê³ , ë”ì´ ì—…ë°ì´íŠ¸ë˜ë©´ ìë™ìœ¼ë¡œ ë°”ì¸ë”©ëœ ë³€ìˆ˜ì˜ ê°’ì„ ì—…ë°ì´íŠ¸ í•œë‹¤.
- ë°”ì¸ë”©ëœ ë³€ìˆ˜ì˜ ê°’ì´ ì—…ë°ì´íŠ¸ ë˜ì—ˆì„ë•Œ ì• ë‹ˆë©”ì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê¸°ëŠ¥ì´ ëª¨ì…˜ì´ë‹¤.
- **Motionì€ Store ì´ë‹¤** 
- ëª¨ì…˜ì˜ ì¢…ë¥˜ : Tweened, Spring => ë‘˜ë‹¤ easingí•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘í•œë‹¤.

#### 10 - 2. Tweened

`tweened`  í•¨ìˆ˜ëŠ” 2ê°œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ë³€ê²½ë˜ëŠ” ê°’ì´ê³  ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.  `tweened`  í•¨ìˆ˜ëŠ” storeë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.  `options`ì— ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê°’ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

-   `delay`  (number, default 0): ë‹¨ìœ„ëŠ” msë¡œ, ì„¤ì •í•œ ì‹œê°„ í›„ì— ì‹œì‘ë©ë‹ˆë‹¤.
-   `duration`  (number, default 400): ë‹¨ìœ„ëŠ” msë¡œ, ì„¤ì •í•œ ì‹œê°„ ë™ì•ˆ ì‹¤í–‰ë©ë‹ˆë‹¤.
-   `easing`  (function, default t => t):  `easing`  í•¨ìˆ˜ì…ë‹ˆë‹¤. SvelteëŠ” ê¸°ë³¸ìœ¼ë¡œ 30ê°€ì§€ í…œí”Œë¦¿([https://svelte.dev/docs#svelte_easing](https://svelte.dev/docs#svelte_easing)  ì°¸ê³ )ì„ ì œê³µí•©ë‹ˆë‹¤. ì»¤ìŠ¤í…€ í•˜ê²Œ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
-   `interpolate`  (function): ë‘ ê°’ ì‚¬ì´ë¥¼ ë³´ê°„í•˜ì—¬ ì¢€ ë” ë¶€ë“œëŸ½ê²Œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.  `(a, b) => t => value`  í˜•íƒœê°€ ì™€ì•¼ í•©ë‹ˆë‹¤.  `a`ëŠ” ì‹œì‘ ê°’,  `b`ëŠ” ëª©í‘¯ê°’,  `t`ëŠ” 0ê³¼ 1ì‚¬ì´ì˜ ìˆ«ìì´ê³ ,  `value`ëŠ” ê²°ê³¼ ê°’ì…ë‹ˆë‹¤.

`store.set`ê³¼  `store.update`ì˜ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—  `options`(ìœ„ì—ì„œ ì„¤ëª…í•œ ì˜µì…˜)ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë‹¬ëœ ì˜µì…˜ì€ ê¸°ë³¸ê°’(ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œ  `tweened(value, options)`ì˜  `options`ê°€ ê¸°ë³¸ê°’ì…ë‹ˆë‹¤.)ì— ì˜¤ë²„ë¼ì´ë“œ(override) ë©ë‹ˆë‹¤.  `set`ê³¼  `update`  í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ì€ Promiseì…ë‹ˆë‹¤. tween ì‘ì—…ì´ ì™„ë£Œë˜ë©´ Promiseê°€ resolve ë©ë‹ˆë‹¤.

```javascript
// src/App.svelte
<script>
import { tweened } from 'svelte/motion'
import { cubicOut } from 'svelte/easing'

const progress = tweened(0, {
	delay: 200,
	duration: 400,
	easing: cubicOut
})

console.log(progress, $progress);

</script>

<progress value={$progress}></progress>

<button on:click={() => $progress = 0}>0%</button>
<button on:click={() => $progress = 0.25}>25%</button>
<button on:click={() => $progress = 0.5}>50%</button>
<button on:click={() => $progress = 0.75}>75%</button>
<button on:click={() => $progress = 1}>100%</button>
```

#### 10 - 3. Spring
- spring motionì€ ìì£¼ ë³€ê²½ë˜ëŠ”ê°’ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤.
- ìŠ¤í”„ë§ì²˜ëŸ¼ íŠ•ê¸°ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì‚¬ìš© ê°€ëŠ¥ 
- 2ê°œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§€ëŠ”ë°, ì²«ë²ˆì§¸ëŠ” ë³€ê²½ë˜ëŠ”ê°’ / ë‘ë²ˆì§¸ëŠ” ì˜µì…˜

### ğŸ–¥ íŠ¸ëœì§€ì…˜
#### 11 - 1. íŠ¸ëœì§€ì…˜ ì‚¬ìš©í•˜ê¸°

```javascript
// src/App.svelte
<script>
import { fade } from 'svelte/transition';
let visible = true;
</script>

<label for="">
	<input type="checkbox" bind:checked={visible}>
	visible
</label>


{#if visible}
	<p transition:fade={{ delay:1000, duration: 1000}}>Fade out</p>
{/if}
```

#### 11 - 2. íŠ¸ëœì§€ì…˜ ì¢…ë¥˜
- fade : íˆ¬ëª…ì—ì„œ ë¶ˆíˆ¬ëª… (delay, duration)
- blur : íë ·í–ˆë‹¤ê°€ ëšœë ·í•´ì§ (delay, duration, easing, opacity, amount)
- fly : ë‚ ë¼ì˜¤ë©´ì„œ ì¶”ê°€ë˜ê³  ë‚ ë¼ê°€ë©´ì„œ ì œê±° (delay, duration, easing, x, y, opacity)
- slide : ìœ„ì—ì„œ ì•„ë˜ë¡œ ìŠ¬ë¼ì´ë“œ (delay, duration, easing)
- scale : ë‚ ë¼ì˜¤ëŠ” ..? (delay, duration, easing, start, opacity)
- draw : svgìš”ì†Œì—ë§Œ ì‚¬ìš©ê°€ëŠ¥, ì„  ê·¸ë¦¬ë“¯ì´ í™”ë©´ì— ë‚˜íƒ€ë‚´ê³  ì œê±° (delay, speed, duration, easing)
- crossfade : ì—‘ìŠ¤ìë¡œ ì¶”ê°€ë˜ê±°ë‚˜ ì œê±°

#### 11 - 3. íŠ¸ëœì§€ì…˜ In/Out
- ìš”ì†Œê°€ í™”ë©´ì— ì¶”ê°€ë¬ì„ë•Œ, ì œê±°ë¬ì„ë•Œ ê° ê° ë‹¤ë¥¸ íŠ¸ëœì§€ì…˜ì„ ì¤„ ìˆ˜ ìˆë‹¤.

```javascript
// src/App.svelte
<script>
	import { fly, fade } from 'svelte/transition'
	let visible = true;
</script>

<label>
	<input type="checkbox" bind:checked={visible} />
	checkbox
</label>

{#if visible }
	<p
	in:fly={{ duration: 2000, y: 200}}
	out:fade
	>Transition</p
		>
{/if}
```

#### 11 - 4. ì»¤ìŠ¤í…€ íŠ¸ëœì§€ì…˜
- [ì‚¬ì´íŠ¸ ì°¸ê³ í•˜ê¸°](https://beomy.github.io/tech/svelte/transition/)

#### 11 - 5. íŠ¸ë Œì§€ì…˜ ì´ë²¤íŠ¸
- íŠ¸ë Œì§€ì…˜ì´ ì–¸ì œ ì‹œì‘ë˜ê³  ì–¸ì œ ëë‚˜ëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ì´ë²¤íŠ¸
- on:introstart : ìš”ì†Œê°€ í™”ë©´ì— ì¶œë ¥ë˜ê¸° ì‹œì‘í–ˆì„ë•Œ
- on:introend : í™”ë©´ì— ì¶”ê°€ëœ íŠ¸ëœì§€ì…˜ì´ ëë‚¬ì„ ë–„
- on:outrostart : í™”ë©´ì— ì œê±°ë˜ê¸° ì‹œì‘í–ˆì„ ë•Œ
- on:outroend : í™”ë©´ì— ì œê±°ëœ íŠ¸ëœì§€ì…˜ì´ ëë‚¬ì„ ë•Œ

```javascript
// src/App.svelte
<script>
	import {fly} from 'svelte/transition'
	let visible = true;
	let status = 'ê¸°ë‹¤ë¦¬ëŠ”ì¤‘..'
</script>

<p>{status}</p>

<lable>
	<input type="checkbox" bind:checked={visible} >
</lable>

{#if visible}
	<p 
		transition:fly={{ duration: 2000, y: 200}} 
		on:introstart={()=> status='intro start'} 
		on:introend={()=> status='intro end'}
		on:outrostart={()=> status='outro start'}
		on:outroend={()=> status='outro end'}
	>
	transition
	</p>
{/if}
```

#### 11 - 6. íŠ¸ë Œì§€ì…˜ ìˆ˜ì‹ì–´
- ë¡œì»¬ ìˆ˜ì‹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ë¡œì»¬ ìˆ˜ì‹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒìœ„ ë¸”ë¡ì— ìš”ì†Œê°€ ì¶”ê°€ë  ê²½ìš°ì—ë§Œ íŠ¸ëœì§€ì…˜ì´ ë™ì‘í•œë‹¤.

```javascript
// src/App.svelte
<script>
import { slide } from 'svelte/transition';
let items = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
let showItems = true;
let i = 5 ; // ë¦¬ìŠ¤íŠ¸ì— ëª‡ë²ˆì§¸ê¹Œì§€ í‘œì‹œí• ì§€ ì •í•˜ëŠ” 
</script>

<label>
	<input type="checkbox" bind:checked={showItems} />
	show list
</label>

<label>
	<input type="range" bind:value={i} max="10"/>
</label>

{#if showItems}
	{#each items.slice(0,i) as item,index (index)}
	<div transition:slide|local>
		{item}
	</div>
	{/each}
{/if}

<!-- divê°€ ì¶”ê°€ë  ê²½ìš°ì—ë§Œ ìŠ¬ë¼ì´ë“œê°€ ë¨¹ëŠ”ë‹¤ : localë•Œë¬¸ì— -->
```











